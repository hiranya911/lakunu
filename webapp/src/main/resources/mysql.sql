CREATE TABLE COURSE (
  COURSE_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
  COURSE_NAME VARCHAR(128) NOT NULL,
  COURSE_DESCRIPTION VARCHAR(512) NOT NULL,
  COURSE_OWNER VARCHAR(128) NOT NULL,
  COURSE_CREATED_AT DATETIME NOT NULL,
  CONSTRAINT UNIQUE_NAME_OWNER UNIQUE(COURSE_NAME, COURSE_OWNER)
);

CREATE TABLE COURSE_USER (
  COURSE_ID BIGINT NOT NULL,
  USER_ID VARCHAR(128) NOT NULL,
  USER_ROLE INT NOT NULL,
  CONSTRAINT FK_COURSE_USER_COURSE_ID FOREIGN KEY (COURSE_ID)
  REFERENCES COURSE(COURSE_ID) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE LAB (
  LAB_ID BIGINT PRIMARY KEY AUTO_INCREMENT,
  LAB_NAME VARCHAR(128) NOT NULL,
  LAB_DESCRIPTION VARCHAR(512) NOT NULL,
  LAB_COURSE_ID BIGINT NOT NULL,
  LAB_CREATED_AT DATETIME NOT NULL,
  LAB_CREATED_BY VARCHAR(128) NOT NULL,
  LAB_CONFIG MEDIUMBLOB DEFAULT NULL,
  LAB_PUBLISHED BOOLEAN NOT NULL DEFAULT FALSE,
  LAB_SUBMISSION_DEADLINE TIMESTAMP,
  LAB_ALLOW_LATE_SUBMISSIONS BOOLEAN DEFAULT FALSE,
  CONSTRAINT UNIQUE_LAB_COURSE UNIQUE(LAB_NAME, LAB_COURSE_ID),
  CONSTRAINT FK_LAB_LAB_COURSE_ID FOREIGN KEY (LAB_COURSE_ID)
  REFERENCES COURSE(COURSE_ID) ON DELETE CASCADE ON UPDATE CASCADE
);